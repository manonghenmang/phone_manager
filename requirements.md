# 手机借还管理系统需求文档

## 1. 项目概述
开发一个Android手机借还管理应用，用于后勤部门管理贴有二维码标签的手机设备的借出和归还流程。

## 2. 核心功能需求

### 2.1 界面功能
- **主界面**：包含两个主要按钮 - "借出"和"归还"
- **二维码扫描**：点击按钮后调用摄像头扫描手机背面的二维码
- **信息输入**：扫描成功后，界面下方提供输入框用于填写相关人员信息
- **确认按钮**：提交操作，更新设备状态

### 2.2 借出流程
1. 用户点击"借出"按钮
2. 调用摄像头扫描手机二维码，获取手机唯一标识
3. 显示手机信息，并提供输入框让用户填写借出人姓名
4. 用户点击"确认"按钮
5. 系统将手机状态更新为"已借出"
6. 记录借出人信息和借出时间

### 2.3 归还流程
1. 用户点击"归还"按钮
2. 调用摄像头扫描手机二维码，获取手机唯一标识
3. 显示手机信息，并提供输入框让用户填写归还人姓名
4. 用户点击"确认"按钮
5. 系统将手机状态更新为"待借出"
6. 记录归还人信息和归还时间

### 2.4 数据管理
- **数据存储**：使用JSON格式存储手机信息、状态和操作记录
- **数据持久化**：确保应用关闭后数据不会丢失
- **操作记录**：完整记录每台手机的借还历史

## 3. 技术要求

### 3.1 开发框架
- **原生Android开发**：使用Java语言开发
- **开发工具**：
  - **Android Studio**（推荐）：官方开发工具，功能完整
  - **VS Code**（可选）：轻量级开发工具，需安装相应插件
    - 推荐插件：
      - Android Extension Pack：提供Android开发核心功能
      - Java Extension Pack：Java开发支持
      - XML Language Support by Red Hat：XML文件编辑支持
      - Debugger for Java：Java调试功能
    - 配置要求：
      - 安装Java Development Kit (JDK) 8+并配置环境变量
      - 安装Android SDK并配置ANDROID_HOME环境变量
      - 安装Gradle并配置GRADLE_HOME环境变量
      - 在VS Code中设置Java和Android SDK路径
- **二维码扫描**：集成ZXing库实现二维码扫描功能
- **数据存储**：SQLite数据库用于持久化存储手机信息和操作记录

### 3.2 技术架构
- **MVC架构**：Model-View-Controller架构设计
  - Model：处理数据逻辑和数据库操作
  - View：用户界面布局和交互
  - Controller：处理业务逻辑和用户交互

### 3.3 第三方库
- **ZXing库**：用于二维码扫描功能
  - 版本：core:3.4.1, zxing-android-embedded:4.2.0

### 3.4 打包要求
- 将应用打包为APK文件
- 兼容Android手机系统（Android 5.0+）
- 确保在实际设备上正常运行

### 3.5 权限需求
- CAMERA：摄像头访问权限，用于二维码扫描
- WRITE_EXTERNAL_STORAGE：外部存储写入权限，用于数据备份
- READ_EXTERNAL_STORAGE：外部存储读取权限，用于数据恢复
- INTERNET（可选）：网络访问权限，用于未来扩展功能

## 4. 数据结构

### 4.1 手机信息
```json
{
  "phone_id": "手机唯一标识（从二维码获取）",
  "status": "设备状态（待借出/已借出）",
  "borrower": "当前借出人姓名",
  "lending_time": "借出时间",
  "returner": "归还人姓名",
  "return_time": "归还时间",
  "last_operation_by": "最后操作人",
  "last_operation_time": "最后操作时间"
}
```

## 5. 用户体验要求
- 界面简洁直观，操作流程清晰
- 扫描响应迅速，识别准确率高
- 操作反馈及时，状态更新清晰
- 适配不同屏幕尺寸的Android设备

## 6. 实现方案

### 6.1 项目结构
```
org.example.phonemanager/
├── model/
│   ├── Phone.java              # 手机信息数据模型
│   ├── PhoneDatabaseHelper.java # SQLite数据库助手类
│   └── PhoneRepository.java    # 数据访问层
├── view/
│   ├── MainActivity.java       # 主界面（借出/归还按钮）
│   ├── ScanActivity.java       # 二维码扫描界面
│   ├── LendActivity.java       # 借出信息输入界面
│   └── ReturnActivity.java     # 归还信息输入界面
├── adapter/
│   └── PhoneAdapter.java       # 手机信息列表适配器（可选）
├── util/
│   └── DateUtils.java          # 日期时间工具类
├── res/
│   ├── layout/
│   │   ├── activity_main.xml   # 主界面布局
│   │   ├── activity_scan.xml   # 扫描界面布局
│   │   ├── activity_lend.xml   # 借出界面布局
│   │   └── activity_return.xml # 归还界面布局
│   ├── values/
│   │   ├── strings.xml         # 字符串资源
│   │   ├── colors.xml          # 颜色资源
│   │   └── styles.xml          # 样式资源
│   └── drawable/               # 图片资源
└── AndroidManifest.xml         # 应用配置文件
```

### 6.2 数据库设计

#### 6.2.1 手机信息表（phone_info）
| 字段名 | 数据类型 | 描述 |
|--------|----------|------|
| phone_id | TEXT | 手机唯一标识（主键） |
| status | TEXT | 设备状态（待借出/已借出） |
| borrower | TEXT | 当前借出人姓名 |
| lending_time | DATETIME | 借出时间 |
| returner | TEXT | 归还人姓名 |
| return_time | DATETIME | 归还时间 |
| last_operation_by | TEXT | 最后操作人 |
| last_operation_time | DATETIME | 最后操作时间 |

### 6.3 界面设计

#### 6.3.1 主界面
- 顶部：应用标题
- 中部：两个主要按钮（借出、归还）
- 底部：操作状态提示

#### 6.3.2 扫描界面
- 顶部：操作类型提示（借出扫描/归还扫描）
- 中部：摄像头预览区域
- 底部：扫描状态提示和返回按钮

#### 6.3.3 信息输入界面
- 顶部：手机标识显示
- 中部：姓名输入框
- 底部：确认按钮和返回按钮

### 6.4 核心流程实现

#### 6.4.1 借出流程
1. 用户点击主界面"借出"按钮
2. 跳转到扫描界面，启动摄像头
3. 扫描手机二维码，获取手机ID
4. 跳转到借出信息输入界面
5. 用户输入借出人姓名，点击确认
6. 系统更新数据库：
   - 将手机状态改为"已借出"
   - 记录借出人姓名
   - 设置借出时间
   - 更新最后操作人及时间
7. 显示操作成功提示，返回主界面

#### 6.4.2 归还流程
1. 用户点击主界面"归还"按钮
2. 跳转到扫描界面，启动摄像头
3. 扫描手机二维码，获取手机ID
4. 跳转到归还信息输入界面
5. 用户输入归还人姓名，点击确认
6. 系统更新数据库：
   - 将手机状态改为"待借出"
   - 记录归还人姓名
   - 设置归还时间
   - 更新最后操作人及时间
7. 显示操作成功提示，返回主界面

### 6.5 异常处理
- 扫码失败：显示错误提示，允许重新扫描
- 数据库操作失败：显示错误提示，记录日志
- 权限被拒绝：引导用户开启相应权限

## 7. 项目交付物
- 完整的应用源代码
- 可直接安装的APK文件
- 详细的使用说明文档
- 项目开发文档